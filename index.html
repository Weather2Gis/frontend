<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="http://maps.api.2gis.ru/2.0/loader.js?pkg=full" data-id="dgLoader"></script>
    <link rel="stylesheet" href="http://2gis.github.io/mapsapi/vendors/Leaflet.markerCluster/MarkerCluster.css" />
    <link rel="stylesheet" href="http://2gis.github.io/mapsapi/vendors/Leaflet.markerCluster/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="http://10.54.71.69/weather.php?r=weather/find&city=Moscow" />
    <script scr="/css/city.js"></script>
</head>
<body>
    
        <div class="online__searchBar">
            <div data-module="searchBar" class="searchBar">
                <div class="searchBar__forms">
                    <input type="text" patter="^[a-zA-Z]+$">
                    </input>

                    <button class="button_search">
                        <span class="button_text">
                            Поиск
                        </span>
                    </button>
                </div> 
            </div>
        </div>
        
    <div id="map" style=" width: 100%; height: 100%;">  
    </div>


    <script type="text/javascript">
        var map;
        DG.then(function(){
                // загрузка кода модуля
                return DG.plugin('http://2gis.github.io/mapsapi/vendors/Leaflet.markerCluster/leaflet.markercluster-src.js');
            })
            .then(function() {
                map = DG.map('map', {
                zoomControl: false,
                fullscreenControl: false,
                center: DG.latLng (54.980169, 82.895864),
                "zoom": 4

        });
        
    var markers = DG.markerClusterGroup();
                // обработка координат для установки маркеров
        for (var i = 0; i < addressPoints.length; i++) {
            var a = addressPoints[i];
            var title = a[1];
            var marker = DG.marker([a[0], a[1]], { title: title });
            marker.bindPopup(title);
            markers.addLayer(marker);

            var myIcon = DG.icon({
                iconUrl: '/icon3.png',
                iconSize: [50, 50],
                });
    DG.marker([54.980169, 82.895864], 
        {icon: myIcon}).addTo(map);
                }

                map.addLayer(markers);
            });
    </script>
    
</body>
</html>